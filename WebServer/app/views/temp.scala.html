@()
<!DOCTYPE html>
<html lang="en">
    <head>
        @* Here's where we render the page title `String`. *@
        <title>Bxcel</title>
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("jquery-easyui-1.5/themes/default/easyui.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("jquery-easyui-1.5/themes/icon.css")">
        <script src="@routes.Assets.versioned("jquery-easyui-1.5/jquery.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.versioned("jquery-easyui-1.5/jquery.easyui.min.js")" type="text/javascript"></script>
    </head>
    <body>

        <div class="easyui-layout" style="height:600px;">
            <div data-options="region:'north'" style="min-height: 2.4em;">
                <div class="easyui-panel" style="padding:5px;">
                    <a href="#" class="easyui-menubutton" data-options="menu:'#mb-dataMiner',plain:true">数据挖掘</a>
                    <a href="#" class="easyui-menubutton" data-options="menu:'#mb-reportDigst'">报表分析</a>
                    <a href="#" class="easyui-menubutton" data-options="menu:'#mm3',iconCls:'icon-help'">About</a>
                </div>
                <div id="mb-dataMiner" style="width:150px;">
                    <div data-options="iconCls:'icon-undo'">订阅管理</div>

                    <div class="menu-sep"></div>
                    <div>数据源管理</div>
                </div>
                <div id="mb-reportDigst" style="width:100px;">
                    <div data-options="iconCls:'icon-redo'">报表管理</div>
                </div>
                <div id="mm3" class="menu-content" style="background:#f0f0f0;padding:10px;text-align:left">
                    <img src="http://www.jeasyui.com/images/logo1.png" style="width:150px;height:50px">
                    <p style="font-size:14px;color:#444;">Bxcel Solution</p>
                </div>
            </div>
            <div data-options="region:'south',split:true" style="height:50px;"></div>
            <div data-options="region:'center'">
                <div class="easyui-tabs" style="width:100%;height:100%">
                    <div title="订阅管理" style="padding:1px" data-options="closable:true">
                        <div class="easyui-layout" data-options="fit:true">
                            <div data-options="region:'west',split:true,hideCollapsedContent:false" title="数据源列表" style="width:200px;">
                                <ul class="easyui-tree" data-options="animate:true,lines:true">
                                    <li>
                                        <span>订阅列表</span>
                                        <ul>
                                            <li data-options="state:'closed'">
                                                <span>S1-MME XDR</span>
                                                <ul>
                                                    <li><span>高掉话网元</span></li>
                                                    <li><span>位置区分析</span></li>
                                                    <li><span>呼叫统计</span></li>
                                                </ul>
                                            </li>
                                            <li>
                                                <span>S1-U XDR</span>
                                                <ul>
                                                    <li>流量分析报表</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                                <ul class="easyui-tree" data-options="animate:true,lines:true">
                                    <li>
                                        <span>数据源</span>
                                        <ul>
                                            <li ><span>S1-MME XDR</span></li>
                                            <li ><span>S1-U XDR</span></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div data-options="region:'center'">
                                <div class="easyui-layout" data-options="fit:true">
                                    <table class="easyui-datagrid" title="高掉话网元" style=""
                                    data-options="rownumbers:true,singleSelect:true,url:'datagrid_data1.json',method:'get',toolbar:subscriptionToolbar">
                                        <thead>
                                            <tr>
                                                <th data-options="field:'itemid',width:80">字段名称</th>
                                                <th data-options="field:'productid',width:100">字段类型</th>
                                                <th data-options="field:'ck',checkbox:true"></th>
                                                <th data-options="field:'productid',width:100,editor:'text'">字段别名</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div title="高掉话网元" style="padding:1px" data-options="closable:true">
                        <div class="easyui-layout" style="height:100%; ">
                            <div data-options="region:'west',split:true,hideCollapsedContent:false" title="索引条件" style="width:20%;padding: 5px">
                                <div class="easyui-panel" style="width:100%;max-width:300px;padding:5px 5px;">
                                    <div style="margin-bottom:10px">
                                        <input class="easyui-datetimebox" label="Start DateTime:" labelPosition="top" style="width:100%;">
                                    </div>
                                    <div style="margin-bottom:20px">
                                        <input class="easyui-datetimebox" label="End DateTime:" labelPosition="top" style="width:100%;">
                                    </div>
                                    <div style="padding:5px 0;">
                                        <a href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search'" style="width:80px">查询</a>
                                    </div>

                                </div>
                            </div>
                            <div data-options="region:'center'">
                                <div class="easyui-layout" style="height:100%;">
                                    <div data-options="region:'north',split:true" style="height: 40px;">测试</div>
                                    <div data-options="region:'center'">
                                        <table class="easyui-datagrid"
                                        data-options="url:'datagrid_data1.json',method:'get',border:false,singleSelect:true,fit:true,fitColumns:true,toolbar:datagridToolbar">
                                            <thead>
                                                <tr>
                                                    <th data-options="field:'itemid'" >Item ID</th>
                                                    <th data-options="field:'productid'" >Product ID</th>
                                                    <th data-options="field:'listprice',align:'right'" >List Price</th>
                                                    <th data-options="field:'unitcost',align:'right'">Unit Cost</th>
                                                    <th data-options="field:'attr1'" >Attribute</th>
                                                    <th data-options="field:'status',align:'center'">Status</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div title="[透视图]高掉话网元" data-options="iconCls:'icon-help',closable:true" style="padding:1px">
                        <div class="easyui-layout" style="height:100%">
                            <div data-options="region:'center'">
                                <table class="easyui-datagrid" data-options="url:'datagrid_data1.json',method:'get',border:false,singleSelect:true,fit:true,fitColumns:true,toolbar:pivotGridToolbar">
                                    <thead>
                                        <tr>
                                            <th data-options="field:'itemid'" >Item ID</th>
                                            <th data-options="field:'productid'" >Product ID</th>
                                            <th data-options="field:'listprice',align:'right'" >List Price</th>
                                            <th data-options="field:'unitcost',align:'right'">Unit Cost</th>
                                            <th data-options="field:'attr1'" >Attribute</th>
                                            <th data-options="field:'status',align:'center'">Status</th>
                                        </tr>
                                    </thead>
                                </table>
                                <div id="pivotWindow" class="easyui-window" data-options="title:'分析策略',inline:true" minimizable=false closable=false style="width: 700px;height:350px;padding:2px">
                                    <div class="easyui-panel" style="width:100%;height:100%;padding:2px;">
                                        <div class="easyui-layout" data-options="fit:true">
                                            <div region="west" data-options="split:true,collapsible:false"  title="字段" style="width: 20%;padding:0px;position: relative">
                                                <ul id="candidateArea" class="drop-target" style="margin:0;padding:2px;height: 98%">
                                                    <li class="drag-item" value="Drag 1">Drag 1</li>
                                                    <li class="drag-item" value="Drag 2">Drag 2</li>
                                                    <li class="drag-item" value="Drag 3">Drag 3</li>
                                                    <li class="drag-item" value="Drag 4">Drag 4</li>
                                                    <li class="drag-item" value="Drag 5">Drag 5</li>
                                                    <li class="drag-item" value="Drag 6">Drag 6</li>
                                                </ul>
                                            </div>
                                            <div data-options="region:'center',split:true,collapsible:false" style="width: 40%;padding:0px">
                                                <div class="easyui-layout" data-options="fit:true">
                                                    <div data-options="region:'north',split:true,collapsible:false,title:'过滤项'" style="height: 50%;padding:0px;position: relative">
                                                        <ul class="duplicate-target drop-target" style="margin:0;padding:2px;height: 98%">

                                                        </ul>
                                                    </div>
                                                    <div data-options="region:'center',split:true,collapsible:false,title:'行项'" style="height: 50%;padding:0px;position: relative">
                                                        <ul class="drop-target" style="margin:0;padding:2px;height: 98%"></ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-options="region:'east',split:true,collapsible:false" style="width:40%;padding:0px;position: relative">
                                                <div class="easyui-layout" data-options="fit:true">
                                                    <div data-options="region:'north',split:true,collapsible:false" title="列项" style="height: 50%;padding:0px;position: relative">
                                                        <ul class="drop-target" style="margin:0;padding:2px;height: 98%"></ul>
                                                    </div>
                                                    <div data-options="region:'center',split:true,collapsible:false" title="计算项" style="height: 50%;padding:0px;position: relative">
                                                        <ul class="drop-target" style="margin:0;padding:2px;height: 98%"></ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div data-options="region:'south',border:false" style="text-align:right;padding:5px 0 0;">
                                                <a class="easyui-linkbutton" data-options="iconCls:'icon-ok'" href="javascript:void(0)" onclick="javascript:alert('ok')" style="width:80px">加载</a>
                                                <a class="easyui-linkbutton" data-options="iconCls:'icon-cancel'" href="javascript:void(0)" onclick="javascript:alert('cancel')" style="width:80px">终止</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="mm" class="easyui-menu" style="width:120px;">
                                    <div onclick="javascript:$('#filterWindow').window('open');">设置</div>
                                </div>
                                <div id="filterWindow" minimizable=false collapsible=false class="easyui-window" title="过滤器设置" closed=true data-options="iconCls:'icon-search',inline:true" style="width:500px;height:auto;padding:10px;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
                var subscriptionToolbar = [
                    {
                        text:'更新订阅',
                        iconCls:'icon-ok',
                        handler:function(){alert('Save Succes')}
                    },{
                        text:'另存订阅',
                        iconCls:'icon-save',
                        handler:function(){alert('Save As Success')}
                    },
                    {
                        text:'删除订阅',
                        iconCls:'icon-remove',
                        handler:function(){alert('Removed')}
                    },
                    '-',
                    {
                        text:'加载订阅',
                        iconCls:'icon-more',
                        handler:function(){alert('Opened')}
                    }
                ];
                var datagridToolbar = [
                    {
                        text:'导出',
                        iconCls:'icon-save',
                        handler:function(){alert('Save Succes')}
                    },{
                        text:'绘图',
                        iconCls:'icon-edit',
                        handler:function(){alert('Save As Success')}
                    },
                    {
                        text:'透视表',
                        iconCls:'icon-search',
                        handler:function(){alert('Removed')}
                    }
                ];
                var pivotGridToolbar = [
                    {
                        text:'导出',
                        iconCls:'icon-save',
                        handler:function(){alert('Save Succes')}
                    },{
                        text:'绘图',
                        iconCls:'icon-edit',
                        handler:function(){alert('Save As Success')}
                    }
                ];
                $(function(){
                    var indicator = $('<div class="indicator">>></div>').appendTo('body');
                    $('.drag-item').draggable({
                        revert:true,
                        proxy:function(){
                            var a = $(this).clone().appendTo('body');
                            a.css('zIndex','999999');
                            return a;
                        }
                    });

                    $('.drop-target').droppable({
                        accept:'.drag-item',
                        onDragEnter:function(e,source){
                            $(source).draggable('options').cursor='auto';
                            $(source).draggable('proxy').css('border','1px solid red');
                            $(this).addClass('over');
                        },
                        onDragLeave:function(e,source){
                            $(source).draggable('options').cursor='not-allowed';
                            $(source).draggable('proxy').css('border','1px solid #ccc');
                            $(this).removeClass('over');
                        },
                        onDrop:function(e,source){
                            $(this).find("[value='"+$(source).attr("value")+"']").remove();
                            $(this).append(source);
                            $(this).removeClass('over');
                            $('.drag-item').draggable({
                                revert:true,
                                proxy:function(){
                                    var a = $(this).clone().appendTo('body');
                                    a.css('zIndex','999999');
                                    return a;
                                }
                            });
                        }
                    });

                    $('.duplicate-target').droppable({
                        accept:'.drag-item',
                        onDrop:function(e,source){

                            if($(this).find("[value='"+$(source).attr("value")+"']").length > 0)
                                $(this).find("[value='"+$(source).attr("value")+"']").remove();
                            else
                            {
                                $("#candidateArea").append($(source).clone());

                                var filter = document.createElement("input");
                                filter.setAttribute("id",$(source).attr("value"));
                                filter.setAttribute("style","width:100%;margin: 5px");
                                filter.setAttribute("label",$(source).attr("value"));
                                $("#filterWindow").append($(filter));

                                $(filter).combobox({
                                    valueField:'value',
                                    textField:'text',
                                    data:[{"value":1,"text":"sdsds"},{"value":31,"text":"ccdss"}]
                                });


                            }
                            $(this).append(source);
                            $(this).removeClass('over');

                            $('.duplicate-target .drag-item').bind('contextmenu',function(e){
                                e.preventDefault();
                                $('#mm').menu('show', {
                                    left: e.pageX,
                                    top: e.pageY
                                });
                            });

                            $('.drag-item').draggable({
                                revert:true,
                                proxy:function(){
                                    var a = $(this).clone().appendTo('body');
                                    a.css('zIndex','999999');
                                    return a;
                                }
                            });
                        }
                    });
                });
        </script>

        <style type="text/css">

        body{
            padding: 0px;
            margin: 0px;
        }

        .drag-item{
            list-style-type:none;
            display:block;
            padding:5px;
            border:1px solid #499B33;
            margin:2px;
            background:#fafafa;
            color:#444;
            text-align:center;
        }
        .indicator{
            position:absolute;
            font-size:9px;
            width:10px;
            height:10px;
            display:none;
            color:red;
        }
        </style>
    </body>
</html>